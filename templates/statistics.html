{% extends "bootstrap/base.html" %}


{% block styles %}
{{ super() }}
<!-- Main CSS -->
<link href="/oncodrug/static/css/main.css" rel="stylesheet"/>
<!-- Animation CSS -->

<link rel="stylesheet" type="text/css" href="/oncodrug/static/css/browse_jquery.dataTables.min.css">

<style>
        body {
        font-family: Arial, sans-serif;
    }

    hr {
        border-color: #0968C3;
        border-width: 0;
        width: 100%;
        margin: 10px auto;
        background-color: #0968C3;
        height: 3px;
        border: none;
      }
      
      .custom-navbar .navbar-nav > li > a {
		color: #fff; 
		margin-right: -50px;
	    }

    .custom-navbar {
      background: linear-gradient(145deg, #8a33c9, #bc6ed0); 
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3); 
    border: none; 
}


    .navbar .navbar-nav {
      display: inline-block;
      float: none;
      vertical-align: top;
    }

    .navbar .navbar-collapse {
      text-align: center;
    }

    .navbar-nav .nav-link {
        margin-right: 25px;
        margin-left: 25px;
        font-size: 20px;
    }

    .custom-container {
    max-width: 1700px; 
    margin-left: auto;
    margin-right: auto;
    }

    .custom-statistics {
    max-width: 1700px; 
    margin: 0 auto; 
    
    }
    
    .custom-row {
    margin-top: 40px; 
    margin-bottom: 40px; 
}

    
    .custom-btn {
    border: 2px solid white;
}


.custom-btn:hover {
    background-color: white;
}



    .chart {
      width: 300px;
    height: 600px;
    }

    #chart1 {
      width: 500px;
    height: 300px;
        }
      #chart2 {
        width: 800px;
    height: 100;
      }
      #chart3 {
        width: 500px;
    height: 300px;
      }
      #chart4 {
        width: 500px;
    height: 300px;
      }

      #chart5 {
        width: 500px;
    height: 300px;
      }


      #chart6 {
        width: 500px;
    height: 300px;
      }

      #my_card.card {
    display: inline-block; 
    width: 1500px; 
    height: 1500px;
    margin: 10px; 
    border: 1px solid #ddd; 
    padding: 20px; 
    border-radius: 5px; 
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); 
       
       
  }

  .nav-link {
    font-size: 20px; 
  }

  .bootstrap-table .search input[type="search"] {
    height: 35px; 
    font-size: 14px; 
}

html, body {
            height: 100%;
            margin: 0;
        }
        body {
            display: flex;
            flex-direction: column;
        }
        .content {
            flex: 1;
        }

        footer {
    height: 60px;
    background-color: #6710c7;
    margin-bottom:0;
    position: relative;
    width: 100%;
}

html, body {
            height: 100%;
            margin: 0;
        }
        body {
            display: flex;
            flex-direction: column;
        }
        .content {
            flex: 1;
        }

        .footer-content p {
        margin: 10;
        text-align: center; 
        width: 100%; 
    }
</style>
{% endblock %}

{% block scripts%}
{{super()}}
<script src="/oncodrug/static/js/browse_bootstrap.bundle.min.js"></script>
<link rel="stylesheet" href="/oncodrug/static/css/browse_bootstrap-table.min.css">
<script src="/oncodrug/static/js/browse_tableExport.min.js"></script>
<script src="/oncodrug/static/js/browse_bootstrap-table-locale-all.min.js"></script>
<script src="/oncodrug/static/js/browse_jquery-3.5.1.min.js"></script>
<script src="/oncodrug/static/js/browse_popper.min.js"></script>
<script src="/oncodrug/static/js/browse_bootstrap-table.min.js"></script>
<link rel="stylesheet" href="/oncodrug/static/js/browse_all.min.css">

{% endblock %}


{% block navbar %}
<nav class="navbar navbar-inverse custom-navbar">
  <div class="container-fluid justify-content-center">

    <div class="collapse navbar-collapse" >
      <ul class="nav navbar-nav">
          <li class=" nav-link"><a  class="custom-glyph nav-link custom-text" href="{{ url_for('web_index.home') }}" style="font-size: 1.4em;">OncoDrug+</a></li>
        <li class=" nav-link"><a href="{{ url_for('web_index.home') }}" class="custom-glyph nav-link custom-text"><span class="glyphicon glyphicon-home custom-glyph"></span> Home</a></li>
        <li class=" nav-link"><a href="{{ url_for('web_index.browse_levela') }}" class="custom-glyph nav-link custom-text"><span class="glyphicon glyphicon-search custom-glyph"></span> Browse</a></li>
        <li class=" nav-link"><a href="{{ url_for('web_index.biomarker') }}" class="custom-glyph nav-link custom-text"><span class="glyphicon glyphicon-map-marker custom-glyph"></span> SmartQuery</a></li>
        <li class="nav-link"><a href="{{ url_for('web_index.statistics') }}" class="custom-glyph nav-link custom-text"><span class="glyphicon glyphicon-stats custom-glyph"></span> Statistics</a></li>
        <li class="nav-link"><a href="{{ url_for('web_index.download_db') }}" class="custom-glyph nav-link custom-text"><span class="glyphicon glyphicon-download-alt custom-glyph"></span> Download</a></li>
        <li class="nav-link"><a href="{{ url_for('web_index.about_document') }}" class="custom-glyph nav-link custom-text"><span class="glyphicon glyphicon-info-sign custom-glyph"></span> Documentation</a></li>
      </ul>
    </div>
  </div>
</nav>
  {% endblock %}


{% block content %}

<!--左侧表格栏-->
<div class="content"  style="display: flex; flex-wrap: wrap">
    <div class="border-right" style="position:relative;width:300px;padding:15px;">
        <div class="card">
          <img class="card-img-top" src="/oncodrug/static/img/oncodrug_logo_border.png" style="height: 111.7px;width:300px ;" alt="card-img-top">
            <div class="card-body">
                <h1 class='card-title' style="text-align: center;">Statistics</h1><p class='card-text'>This interface provides comprehensive statistics on the number of data entries categorized by evidence levels, prioritization scores, and cancer types. Additionally, it details the number of data entries sourced from various databases and literature across different origins.<br> </p>            </div>

        </div>
    </div>

<!--右侧表格栏-->
    <div style="position:relative; padding: 10px 20px;padding-top: 10px;">
        <h1>
          Detailed entry statistics collected from each database and literature source        </h1>
        <hr>

          <!-- 为 ECharts 准备一个定义了宽高的 DOM -->

          <div id='my_card' class="card">
              <div class="row">
                <div class="col-md-6" >
                    <div id="chart1" style="width: 700px; height: 400px; position: relative; top: -25px;  margin-left: -50px;"></div>
                </div>
                <div class="col-md-6" >
                  <div id="chart3" style="width: 800px; height: 500px; position: relative; top: 0px;  margin-left: -70px;"></div>
              </div>

            </div>

            <div class="row">

              <div class="col-md-6">
                <div id="chart4" style="width: 700px; height: 400px; position: relative; top: -10px;  margin-left: -50px;"></div>
            </div>
            <div class="col-md-6" >
              <div id="chart2" style="width: 800px; height: 500px; position: relative; top: 0px;  margin-left: -70px;"></div>
          </div>

          <div class="row">

            <div class="col-md-6">
              <div id="chart5" style="width: 700px; height: 500px; position: relative; top: -10px;  margin-left: -50px;"></div>
          </div>
          <div class="col-md-6" >
            <div id="chart6" style="width: 800px; height: 500px; position: relative; top: -10px;  margin-left: -42px;"></div>
        </div>

            </div>
              <script src="/oncodrug/static/js/package/dist/echarts.js"></script>
              <script src="/oncodrug/static/js/jquery.min.js"></script>
              <script type="text/javascript">
                  var chart1   = echarts.init(document.getElementById('chart1'));
              // 指定图表的配置项和数据
                    var option1 = {
                      title: {
                      text: 'Distribution of entries with different levels of evidence',
                      top: 25,    
                      left: 'center'
                      },
                          tooltip: {
                          trigger: 'item'
                        },
                        legend: {
                          bottom: '12.5%',
                      left: 'center'
                        },
                        series: [
                          {
                            name: 'Access From',
                            type: 'pie',
                            radius: ['30%', '60%'],
                            avoidLabelOverlap: false,
                            itemStyle: {
                              borderRadius: 10,
                              borderColor: '#fff',
                              borderWidth: 2
                            },
                            label: {
                              show: false,
                              position: 'center'
                            },
                            emphasis: {
                              label: {
                                show: true,
                                fontSize: 20,
                                fontWeight: 'bold'
                              }
                            },
                            labelLine: {
                              show: false
                            },
                            data: [
                              { value:74, name: 'Level A' },
                              { value: 960, name: 'Level B' },
                              { value: 1569, name: 'Level C' },
                              { value: 5066, name: 'Level D' },
                            ]
                          }
                        ]
                      };
                    // 使用刚指定的配置项和数据显示图表。
                    chart1.setOption(option1);

                var chart4   = echarts.init(document.getElementById('chart4'));
                // 指定图表的配置项和数据
                var option4 = {title: {
                      text: 'Distribution of entries for different cancer types',
                      top: 25,   
                      left: 'center'
                      },

                    tooltip: {
                      trigger: 'item'
                    },
                    legend: {
                      bottom: '0%',
                      left: 'center'
                    },
                    series: [
                      {
                        name: 'Access From',
                        type: 'pie',
                        radius: ['30%', '60%'],
                        avoidLabelOverlap: false,
                        itemStyle: {
                          borderRadius: 10,
                          borderColor: '#fff',
                          borderWidth: 2
                        },
                        label: {
                          show: false,
                          position: 'center'
                        },
                        emphasis: {
                          label: {
                            show: true,
                            fontSize: 20,
                            fontWeight: 'bold'
                          }
                        },
                        labelLine: {
                          show: false
                        },
                        data: [
                          { value: 856, name: 'Invasive Breast Carcinoma' },
                          { value: 710, name: 'Non-Small Cell Lung Cancer' },
                          { value: 424, name: 'Esophagogastric Adenocarcinoma' },
                          { value: 420, name: 'Colorectal Adenocarcinoma' },
                          { value: 418, name: 'Endometrial Carcinoma' },
                          { value: 4841, name: 'Other cancer types' }
                        ]
                      }
                    ]
                  };
                // 使用刚指定的配置项和数据显示图表。
                chart4.setOption(option4);

            var chart2 = echarts.init(document.getElementById('chart2'));
            // 指定图表的配置项和数据
            var option2 = option = {
              title: {
                      text: 'Distribution of entries with different levels of evidence across various datasets',
                      top: 15,    
                      left: 'center'
                      },
                tooltip: {
                  trigger: 'axis',
                  axisPointer: {
                    type: 'shadow'
                  }
                },
                legend: {
                  orient: 'vertical', // 设置图例显示方向为垂直
                  right: '0%',
                  top: 'center'
                },
                xAxis: {
                  type: 'value',
                  boundaryGap: [0, 0.01]
                },
                yAxis: {
                  type: 'category',
                  data: ['FDA',
                'Guidelines',
                'Clinical trail',
                'Individual case',
                'Cell lines',
                'PDX',
                'Bioinfor- matics'],
                axisLabel: {
                  interval: 0, // 强制所有标签显示
                  margin: 15,  // 调整标签与坐标轴的间距
                  formatter: function(value) {
                    // 自动换行
                    return value.split(' ').join('\n');
                  }
                }},
                series: [
                  {'name': 'ALMANAC','type': 'bar','data': [0, 0, 0, 0, 102, 0, 0]},
                {'name': 'Azadeh C. Bashi et al. Cell Lines', 'type': 'bar', 'data': [0, 0, 0, 0, 953, 0, 0]},
                {'name': 'ClinicalTrials.gov', 'type': 'bar', 'data': [0, 0, 323, 26, 0, 0, 0]},
                {'name': 'DCDB', 'type': 'bar', 'data': [0, 0, 154, 0, 23, 0, 0]},
                {'name': 'DrugCombDB', 'type': 'bar', 'data': [0, 0, 0, 0, 6, 0, 0]},
                {'name': 'Hui Gao et al. PDX', 'type': 'bar', 'data': [0, 0, 0, 0, 0, 30, 0]},
                {'name': 'I-PREDICT Clinical Trial', 'type': 'bar', 'data': [0, 0, 39, 0, 0, 0, 0]},
                {'name': 'Jennifer O"Neil et al. Cell Lines', 'type': 'bar', 'data': [0, 0, 0, 0, 31, 0, 0]},
                {'name': 'Manual literature retrieval', 'type': 'bar', 'data': [0, 0, 13, 0, 0, 0, 0]},
                {'name': 'NCI treatment/NCCN guidelines', 'type': 'bar', 'data': [2, 58, 0, 0, 0, 0, 0]},
                {'name': 'Nishanth Ulhas Nair et al. Cell Line', 'type': 'bar', 'data': [0, 0, 0, 0, 51, 0, 0]},
                {'name': 'Patricia Jaaks et al. Cell Lines', 'type': 'bar', 'data': [0, 0, 0, 0, 0, 251,0, 0]},
                {'name': 'REFLECT', 'type': 'bar', 'data': [0, 0, 0, 0, 0, 0, 5066]},
                {'name': 'Ravi S. Narayan et al. Cell Lines', 'type': 'bar', 'data': [0, 0, 0, 0, 13, 0, 0]},
                {'name': 'TMUSH', 'type': 'bar', 'data': [0, 0, 0, 233, 0, 0, 0]},
                {'name': 'VICC', 'type': 'bar', 'data': [14, 0, 172, 0, 112, 0, 0]}
                ]
                };
            // 使用刚指定的配置项和数据显示图表。
            chart2.setOption(option2);


            var chart3 = echarts.init(document.getElementById('chart3'));
            // 指定图表的配置项和数据
            var option3 = option = {
              title: {
                text: 'Distribution of entries with different drug prioritization score', 
                      left: 'center'
                      },
                      xAxis: {
                type: 'category',
                data: ['-13', '-12', '-11', '-10', '-9', '-8', '-7',
                '-6', '-5', '-4', '-3', '-2', '-1', '0',
                '1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12', '13'
                ]
              },
              yAxis: {
                type: 'value'
              },
              series: [
                {
                  data: [3, 34, 37, 73, 20, 45, 70,6,0,0,0,0,0,0,0,0,0,0,1,55,388,3460,2468,661,170,148,30],
                  type: 'bar'
                }
              ]
            };
            // 使用刚指定的配置项和数据显示图表。
              chart3.setOption(option3);


              
              var chart5   = echarts.init(document.getElementById('chart5'));
                $.get("/oncodrug/static/js/echart_subnetwork_data.json").done(function (webkitDep) {

                  var edges = webkitDep.links.map(function (link) {
                    return {
                        source: link.source,
                        target: link.target,
                        lineStyle: {
                            width: Math.max(link.width || 1, 1) // Use the width from JSON, or default to 1 if not provided, ensure minimum width of 1
                        }
                    };
                });

                  chart5.setOption(
                    {title: {
                text: 'Distribution of drug relationship network', 
                      left: 'center'
                      },
                      legend: {
                        data: ['Target drugs', 'Non-target drugs'],
                        bottom: '5%'
                      },
                      series: [
                        {
                          type: 'graph',
                          layout: 'force',
                          animation: false,
                          label: {
                            position: 'right',
                            formatter: '{b}'
                          },
                          draggable: true,
                          data: webkitDep.nodes.map(function (node, idx) {
                            node.id = idx;
                            return node;
                          }),
                          categories: webkitDep.categories,                
                          categories: [
                    { name: 'Target drugs', itemStyle: { color: '#516BB2' } },
                    { name: 'Non-target drugs', itemStyle: { color: '#E16463' } }
                ],
                          force: {
                            edgeLength: 5,
                            repulsion: 20,
                            gravity: 0.2
                          },
                          edges: edges
                        }
                      ]
                    }
                  );

                });



                var chart6 = echarts.init(document.getElementById('chart6'));
            // 指定图表的配置项和数据
            $.get("/oncodrug/static/js/mutation_stas_data.json").done(function (mut_stas_data) {
              var chartData = mut_stas_data.data;

              var option6 = {title: {
                text: 'Distribution of entries for genetic mutations', 
                      left: 'center'
                      },
                          xAxis: {name: 'The number of cancer types with genetic mutations',nameLocation: 'middle',nameGap: 30},
                yAxis: {name: 'The number of entries with genetic mutations',nameLocation: 'middle',nameGap: 30},
                  tooltip: {
                  trigger: 'item',
                  formatter: function(params) {
                    return params.name;
                  }
                },
                series: [
                {
                symbolSize: 10,
                data: chartData,
                type: 'scatter'
                }
                ]
            };
            // 使用刚指定的配置项和数据显示图表。
              chart6.setOption(option6);
            })

              </script>
            </div>

          </script>
      </div>

    </div>

</div>

<footer>
  <div class="row ">
    <div class="col-md-12 footer-content">
           <p class="pull-left"  style="margin-top: 20px;color: white;">2023-2024 © Mulinlab@Tianjin Medical University, All Rights Reserved.</p>
    </div>
  </div>
</footer> 


{% endblock %}